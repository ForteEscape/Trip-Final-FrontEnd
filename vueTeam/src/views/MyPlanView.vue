<script setup>
import { ref, onMounted } from "vue";
import { useRouter } from "vue-router";
import axios from "axios";

const boards = ref([]);
const currentPage = ref(1); // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìƒíƒœ ë³€ìˆ˜
const router = useRouter();

// ëª¨ë“  ê²Œì‹œê¸€ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
async function getAll() {
  // try {
  //   const response = await axios.get(`/hotplaces?page=${currentPage.value}`);
  //   // API ì‘ë‹µ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì—¬ í˜ì´ì§€ë³„ë¡œ ê²Œì‹œê¸€ì„ ë¶„í• 
  //   const totalPages = Math.ceil(response.headers['x-total-count'] / 12); // x-total-count í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ í˜ì´ì§€ ìˆ˜ ê³„ì‚°
  //   let paginatedBoards = [];
  //   for (let i = 1; i <= totalPages; i++) {
  //     const pageResponse = await axios.get(`/hotplaces?page=${i}`);
  //     paginatedBoards.push(...pageResponse.data); // ê° í˜ì´ì§€ì˜ ê²Œì‹œê¸€ì„ paginatedBoards ë°°ì—´ì— ì¶”ê°€
  //   }
  //   boards.value = paginatedBoards; // ì „ì²´ ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ boards ë°°ì—´ì— ì €ì¥
  // } catch (error) {
  //   console.error("Error fetching posts:", error);
  // }
}

// ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
function toBoardDetail(id) {
  router.push({ name: "detail", params: { id: id } });
}

// í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì¦ê°€ì‹œí‚¤ê³  ë‹¤ì‹œ ê²Œì‹œê¸€ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
function nextPage() {
  currentPage.value++;
  getAll(); // ìƒˆë¡œìš´ í˜ì´ì§€ ë²ˆí˜¸ë¡œ ê²Œì‹œê¸€ì„ ë‹¤ì‹œ ê°€ì ¸ì˜µë‹ˆë‹¤.
}

// í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ê°ì†Œì‹œí‚¤ê³  ë‹¤ì‹œ ê²Œì‹œê¸€ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
function prevPage() {
  if (currentPage.value > 1) {
    currentPage.value--;
    getAll(); // ì´ì „ í˜ì´ì§€ ë²ˆí˜¸ë¡œ ê²Œì‹œê¸€ì„ ë‹¤ì‹œ ê°€ì ¸ì˜µë‹ˆë‹¤.
  }
}

onMounted(() => {
  getAll(); // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ê²Œì‹œê¸€ì„ ì²˜ìŒë¶€í„° ê°€ì ¸ì˜µë‹ˆë‹¤.
});
</script>

<template>
  <div id="page-wrapper">
    <div class="page-icon shadow">ğŸŒ¡ï¸</div>
    <div class="title">
      <h1>í•«í”Œë ˆì´ìŠ¤ ê²Œì‹œíŒ</h1>
    </div>

    <div>

    </div>
  </div>
</template>

<style scoped>
@import "../assets/colortheme.css";

.page-icon {
  font-size: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 7rem;
  width: 7rem;
  border-radius: 50%;
}

.title * {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 0.5rem;
  margin-bottom: 1rem;
  font-size: 40px;
  font-weight: 700;
}

</style>
